import{_ as T}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-scL_XI_H.js";import{I as $}from"./InvertedButton-B43qZtpD.js";import{u as k,a as _,b as C,c as I}from"./textStore-CRw0B2M-.js";import{d as g,u as O,c as n,a as j,b as t,e as f,w as m,i as z,l as R,n as q,o as B}from"./index-D0pO9Tvl.js";import{b as x}from"./order-CGegnj1S.js";import{s as d,a as F,h as D,i as N}from"./index-C8rzKqQ3.js";import"./base-CHC5KoCc.js";const P={class:"rounded-card bg-base flex flex-col gap-2.5 p-2.5 w-[95vw] h-[auto] mt-[40vh] absolute"},V={class:"flex flex-row justify-between gap-2.5 w-full mt-2.5"},A=g({name:"PayedAfter"}),W=g({...A,setup(E){const a=O().query;console.log(a);const u=k();u.themes;const p=n(()=>u.getTheme),v=_(),h=n(()=>v.getRounded),w=C(),y=n(()=>w.getFontSize),l=I(),i=n(()=>l.getText);n(()=>l.getTexts);const s=R(),b=()=>{x({uuid:a.orderId}).then(o=>{if(console.log("res",o.data),o.data.status==="failed")d(`支付失敗:${o.data.message}`),s.push({name:"OrderDetail",query:{uuid:a.orderId}});else if(o.data.status==="success")F("支付成功"),s.push({name:"Order"});else{let e=5;const c=setInterval(()=>{e--,e?S.message=`正在支付中(${e})`:(clearInterval(c),N())},1e3),S=D({duration:0,forbidClick:!0,message:"正在支付中(5)"});setTimeout(()=>{x({uuid:o.data.orderUuid}).then(r=>{console.log("res3",r.data),r.data.status==="failed"?(d(`支付失敗:${r.data.message}`),s.push({name:"OrderDetail",query:{uuid:a.orderId}})):r.data.status==="success"?s.push({name:"Order"}):(d(`出錯了:${r.data.message}`),s.push({name:"OrderDetail",query:{uuid:a.orderId}}))})},3e3)}})};return(o,e)=>(B(),j("div",{class:q([`font-${i.value} theme-color-${p.value} theme-rounded-${h.value} theme-fontsize-${y.value} font-${i.value} `,"text-muted bg-gradient-to-b from-skin-primary to-skin-secondary h-[100vh] relative flex justify-center items-center"])},[t("div",P,[e[3]||(e[3]=t("div",{class:"text-largest font-bold tracking-wide flex justify-center"}," 訂單確認 ",-1)),e[4]||(e[4]=t("div",{class:"text-larger font-normal flex flex-row justify-center items-center truncate"}," 已經支付訂單 ? 開始享用 ",-1)),t("div",V,[f($,{onClick:e[0]||(e[0]=c=>z(s).go(-1))},{default:m(()=>e[1]||(e[1]=[t("div",{class:"w-[22vw] h-[22px] flex flex-row justify-center items-center"},[t("span",{class:"text-base text-primary font-bold font-CactusClassicalSerifHK text-center"}," 返回上級 ")],-1)])),_:1}),f(T,{class:"grow",onClick:b},{default:m(()=>e[2]||(e[2]=[t("div",{class:"h-[22px] flex flex-row justify-center items-center gap-2"},[t("span",{class:"text-larger text-inverted font-bold tracking-wide"},"完成支付")],-1)])),_:1})])])],2))}});export{W as default};
