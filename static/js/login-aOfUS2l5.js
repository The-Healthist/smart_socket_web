import{_ as P}from"./index-B68_FZo7.js";import{d as y,c as l,p as u,a as m,b as t,A as x,B as g,m as _,e as d,w as h,i as R,l as A,n as D,o as f}from"./index-D0pO9Tvl.js";import{_ as G}from"./PrimaryButton.vue_vue_type_script_setup_true_lang-scL_XI_H.js";import{I as H}from"./InvertedButton-B43qZtpD.js";import{u as N,a as U,b as E,c as K}from"./textStore-CRw0B2M-.js";import{v as w}from"./data-C6fO1sHB.js";import{k as M,a as S,s as b,l as q}from"./index-C8rzKqQ3.js";import"./base-CHC5KoCc.js";const J={class:"rounded-card bg-base flex flex-col p-3 w-[95vw] h-[auto] mt-[20vh] absolute"},O={class:"flex flex-col"},Q={class:"relative mt-2.5 flex flex-row justify-center items-center"},W={class:"flex h-2.5 ml-2.5"},X={key:0,class:"text-red-500 text-sm"},Y={class:"relative mt-2.5 flex flex-row justify-center items-center"},Z={class:"flex h-2.5 ml-2.5"},ee={key:0,class:"text-red-500 text-sm"},te={class:"flex justify-center items-center ml-2.5 gap-2.5 p-2.4 mt-3"},se={class:"h-[22px] flex flex-row justify-center items-center gap-2"},oe={class:"flex justify-center items-center p-2.4 mt-2.5"},ae=y({name:"Login"}),pe=y({...ae,setup(le){const k=N(),$=l(()=>k.getTheme),C=U(),j=l(()=>C.getRounded),I=E(),T=l(()=>I.getFontSize),V=K(),z=l(()=>V.getText),c=A(),s=u({mobile:"13583325035",password:"test1234"}),p=l(()=>w("mobile",s.value.mobile)),v=l(()=>w("password",s.value.password)),r=u(!1),i=u(!1),n=u();async function B(){if(r.value=!s.value.mobile||!p.value,i.value=!s.value.password||!v.value,r.value||i.value){console.error("請正確填寫所有必填字段！");return}console.log("formData",s.value),M(s.value).then(o=>{n.value=o,console.log("common_token",localStorage.getItem("common_token")),localStorage.setItem("common_token",n.value.token),localStorage.setItem("mobile",s.value.mobile),localStorage.setItem("isGuest","false"),S("登錄成功"),c.push({name:"Home"})}).catch(o=>{b(`登錄失敗:${o.response.data.message}`)})}async function F(){r.value=!1,i.value=!1,q().then(o=>{n.value=o,console.log("loginAfter",n.value),localStorage.setItem("common_token",n.value.token),localStorage.setItem("isGuest","true"),S("遊客登錄成功"),c.push({name:"Home"})}).catch(o=>{b(`登錄失敗:${o.response.data.message}`)})}return(o,e)=>{const L=P;return f(),m("div",{class:D([`font-${z.value} theme-color-${$.value} theme-rounded-${j.value} theme-fontsize-${T.value}`,"text-muted bg-gradient-to-b from-skin-primary to-skin-secondary h-[100vh] relative flex justify-center items-center"])},[t("div",J,[e[7]||(e[7]=t("div",{class:"text-largest font-bold tracking-wide flex justify-center"}," 登 入 ",-1)),t("div",O,[t("div",Q,[x(t("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>s.value.mobile=a),type:"number",placeholder:"手機號碼",class:"py-1 px-3 border rounded w-full text-lg tracking-wider"},null,512),[[g,s.value.mobile]])]),t("div",W,[!p.value&&r.value?(f(),m("span",X,"手機號碼不能位空且為6~12位數字")):_("",!0)]),t("div",Y,[x(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.password=a),type:"password",placeholder:"密碼",class:"py-1 px-3 border rounded w-full text-lg"},null,512),[[g,s.value.password]])]),t("div",Z,[!v.value&&i.value?(f(),m("span",ee,"密碼不能為空且必須是6~16位")):_("",!0)]),t("div",te,[d(H,{onClick:e[2]||(e[2]=a=>F())},{default:h(()=>e[5]||(e[5]=[t("div",{class:"w-[auto] h-[22px] flex flex-row justify-center items-center"},[t("span",{class:"text-large text-primary font-bold font-CactusClassicalSerifHK text-center"}," 使用遊客登錄 ")],-1)])),_:1}),d(G,{class:"grow",onClick:e[3]||(e[3]=a=>B())},{default:h(()=>[t("div",se,[d(L,{icon:"mingcute:flash-line",class:"text-[20px]"}),e[6]||(e[6]=t("span",{class:"text-larger text-inverted font-bold tracking-wide"},"即刻登錄",-1))])]),_:1})])]),t("div",oe,[t("span",{class:"text-primary/80 text-base hover:text-primary cursor-pointer",onClick:e[4]||(e[4]=a=>R(c).push("/register"))},"沒有賬號?點擊註冊")])])],2)}}});export{pe as default};
